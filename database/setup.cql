CREATE KEYSPACE Hermes WITH replication = {
    'class': 'SimpleStrategy', 
    'replication_factor': '1'
} AND durable_writes = true;

CREATE TABLE Hermes.Channels (
    UUID TIMEUUID PRIMARY KEY,
    Name TEXT,
    Members LIST<TEXT>,
    Icon BLOB,
);

CREATE TABLE Hermes.Users (
    User_low TEXT PRIMARY KEY,
    Username TEXT,
    PasswordHash TEXT,
    Channels LIST<TIMEUUID>,
);

CREATE TABLE Hermes.Messages (
    UUID TIMEUUID,
    channel TIMEUUID,
    message TEXT,
    username TEXT,
    PRIMARY KEY(channel, UUID)
);

CREATE TABLE Hermes.Sessions (
    UUID TIMEUUID PRIMARY KEY,
    Username TEXT,
    LastActive TIMESTAMP
);

CREATE TABLE Hermes.Settings (
    Username TEXT PRIMARY KEY,
    Notifications TINYINT,
    Theme TEXT,
    Color TEXT,
    Image BLOB
);

CREATE TABLE Hermes.Tokens (
    UUID UUID PRIMARY KEY
);

INSERT INTO Hermes.Tokens (UUID) values(uuid());

INSERT INTO Channels (UUID, Name, Members, Icon) values(now(), 'GLOBAL', [], textAsBlob('PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhLS0gR2VuZXJhdG9yOiBHcmF2aXQuaW8gLS0+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBzdHlsZT0iaXNvbGF0aW9uOmlzb2xhdGUiIHZpZXdCb3g9IjAgMCAxMDAwIDEwMDAiIHdpZHRoPSIxMDAwIiBoZWlnaHQ9IjEwMDAiPjxkZWZzPjxjbGlwUGF0aCBpZD0iX2NsaXBQYXRoX2M5Z0FHNDZZTUFiZjFIbDRvbXZ6VWdEbkR0OUVaTWpHIj48cmVjdCB3aWR0aD0iMTAwMCIgaGVpZ2h0PSIxMDAwIi8+PC9jbGlwUGF0aD48L2RlZnM+PGcgY2xpcC1wYXRoPSJ1cmwoI19jbGlwUGF0aF9jOWdBRzQ2WU1BYmYxSGw0b212elVnRG5EdDlFWk1qRykiPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAwIiBoZWlnaHQ9IjEwMDAiIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLDEsMCwwKSIgZmlsbD0icmdiKDIyOSwyMjksMjI5KSIvPjxjbGlwUGF0aCBpZD0iX2NsaXBQYXRoX0Y3WVVscGh6UE5pTkNZOEFPcjVzcGtucnFvUkdNeG5xIj48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwMCIgaGVpZ2h0PSIxMDAwIiB0cmFuc2Zvcm09Im1hdHJpeCgxLDAsMCwxLDAsMCkiIGZpbGw9InJnYigyNTUsMjU1LDI1NSkiLz48L2NsaXBQYXRoPjxnIGNsaXAtcGF0aD0idXJsKCNfY2xpcFBhdGhfRjdZVWxwaHpQTmlOQ1k4QU9yNXNwa25ycW9SR014bnEpIj48Zz48cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwMDAiIGhlaWdodD0iMTAwMDAiIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLDEsMCwwKSIgZmlsbD0icmdiKDkwLDE5NiwxMjYpIi8+PHBhdGggZD0iIE0gNzMwLjMzMyA4MzkuNTgyIEwgNzMwLjI3MiA4MzkuNjg3IEwgNDA1LjUxMyA2NTIuMTg3IEMgMzQ1LjcyNiA2MTcuNjcgMzI1LjI0MiA1NDEuMjIxIDM1OS43NiA0ODEuNDM0IEMgMjk5Ljk3MyA0NDYuOTE2IDI3OS40ODkgMzcwLjQ2OCAzMTQuMDA2IDMxMC42ODEgQyAyNTQuMjIgMjc2LjE2MyAyMzMuNzM1IDE5OS43MTQgMjY4LjI1MyAxMzkuOTI4IEwgMzc2LjUwNiAyMDIuNDI4IEwgNTkzLjAxMyAzMjcuNDI4IEMgNzcyLjMzNyA0MzAuOTYxIDgzMy44MDEgNjYwLjIzOCA3MzAuMzMzIDgzOS41ODIgWiAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZmlsbD0icmdiKDI1NSwyNTUsMjU1KSIvPjxsaW5lYXJHcmFkaWVudCBpZD0iX2xncmFkaWVudF81IiB4MT0iMC40OTk5OTk5OTk5OTk5OTk5IiB5MT0iMCIgeDI9IjAuNDk5OTk5OTk5OTk5OTk5NyIgeTI9IjAuOTk5OTk5OTk5OTk5OTk5NiIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgzNzUuMDA4LC0wLjAwNSwwLjAwMiwxMjUuMDAzLDIxMS44OTEsMjI1LjMwNykiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLW9wYWNpdHk9IjAuNjYiIHN0eWxlPSJzdG9wLWNvbG9yOnJnYigyMzYsMjE0LDE5KSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1vcGFjaXR5PSIwIiBzdHlsZT0ic3RvcC1jb2xvcjpyZ2IoMjQ0LDIyMywzNCkiLz48L2xpbmVhckdyYWRpZW50PjxyZWN0IHg9IjIxMS44ODMiIHk9IjIyNS4zMDUiIHdpZHRoPSIzNzUiIGhlaWdodD0iMTI1IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg2NiwwLjUsLTAuNSwwLjg2NiwxOTcuNDA5LC0xNjEuMTMzKSIgZmlsbD0idXJsKCNfbGdyYWRpZW50XzUpIi8+PGxpbmVhckdyYWRpZW50IGlkPSJfbGdyYWRpZW50XzYiIHgxPSIwLjQ5OTk5OTk5OTk5OTk5OTkiIHkxPSIwIiB4Mj0iMC40OTk5OTk5OTk5OTk5OTk3IiB5Mj0iMSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgzNzUuMDA4LC0wLjAwNSwwLjAwMiwxMjUuMDAzLDI1Ny42NDYsMzk2LjA2MykiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLW9wYWNpdHk9IjAuNjYiIHN0eWxlPSJzdG9wLWNvbG9yOnJnYigyMzYsMjE0LDE5KSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1vcGFjaXR5PSIwIiBzdHlsZT0ic3RvcC1jb2xvcjpyZ2IoMjQ0LDIyMywzNCkiLz48L2xpbmVhckdyYWRpZW50PjxyZWN0IHg9IjI1Ny42MzYiIHk9IjM5Ni4wNTgiIHdpZHRoPSIzNzUiIGhlaWdodD0iMTI1IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg2NiwwLjUsLTAuNSwwLjg2NiwyODguOTE2LC0xNjEuMTMzKSIgZmlsbD0idXJsKCNfbGdyYWRpZW50XzYpIi8+PGxpbmVhckdyYWRpZW50IGlkPSJfbGdyYWRpZW50XzciIHgxPSIwLjQ4MTA5MjYyNTYwMzA1OTUiIHkxPSIwLjMxNDE3Mjg3MDY5MTIwOTkiIHgyPSIwLjQ5OTk5OTk5OTk5OTk5OTk0IiB5Mj0iMC45OTk5OTk5OTk5OTk5OTk2IiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDEyNS4wMDMsLTAuMDAyLDAuMDAyLDEyNS4wMDMsNDkwLjkwNiw0NTguNTYxKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3Atb3BhY2l0eT0iMSIgc3R5bGU9InN0b3AtY29sb3I6cmdiKDI1NSwyNTUsMjU1KSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1vcGFjaXR5PSIwIiBzdHlsZT0ic3RvcC1jb2xvcjpyZ2IoMjU1LDI1NSwyNTUpIi8+PC9saW5lYXJHcmFkaWVudD48cmVjdCB4PSI0OTAuODg5IiB5PSI0NTguNTU4IiB3aWR0aD0iMTI1IiBoZWlnaHQ9IjEyNSIgdHJhbnNmb3JtPSJtYXRyaXgoLTAuNSwwLjg2NiwtMC44NjYsLTAuNSwxMjgxLjMzMywzMDIuMzM3KSIgZmlsbD0idXJsKCNfbGdyYWRpZW50XzcpIi8+PGxpbmVhckdyYWRpZW50IGlkPSJfbGdyYWRpZW50XzgiIHgxPSIwLjUiIHkxPSIwIiB4Mj0iMC40OTk5OTk5OTk5OTk5OTk4MyIgeTI9IjEiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMzc1LjAwOCwtMC4wMDUsMC4wMDIsMTI1LjAwMywzMDMuNDA0LDU2Ni44MTkpIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1vcGFjaXR5PSIwLjY2IiBzdHlsZT0ic3RvcC1jb2xvcjpyZ2IoMjM2LDIxNCwxOSkiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3Atb3BhY2l0eT0iMCIgc3R5bGU9InN0b3AtY29sb3I6cmdiKDI0NCwyMjMsMzQpIi8+PC9saW5lYXJHcmFkaWVudD48cmVjdCB4PSIzMDMuMzkiIHk9IjU2Ni44MTEiIHdpZHRoPSIzNzUiIGhlaWdodD0iMTI1IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg2NiwwLjUsLTAuNSwwLjg2NiwzODAuNDIyLC0xNjEuMTMzKSIgZmlsbD0idXJsKCNfbGdyYWRpZW50XzgpIi8+PGxpbmVhckdyYWRpZW50IGlkPSJfbGdyYWRpZW50XzkiIHgxPSIwLjUwMzcyNDYwNDU5NjExMiIgeTE9IjAuMzIyNDY0OTEyOTcwODIyMzYiIHgyPSIwLjQ5OTk1MDc3NjE1MDcxMjUiIHkyPSIwLjk5NTczODM0OTE2Nzc4NjUiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMTI1LjAwMywtMC4wMDIsMC4wMDIsMTI1LjAwMyw1MzYuNjYyLDYyOS4zMTcpIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwLjQzNDc4MjYwODY5NTY1MjE2JSIgc3RvcC1vcGFjaXR5PSIxIiBzdHlsZT0ic3RvcC1jb2xvcjpyZ2IoMjU1LDI1NSwyNTUpIi8+PHN0b3Agb2Zmc2V0PSI5OC42OTU2NTIxNzM5MTMwNSUiIHN0b3Atb3BhY2l0eT0iMCIgc3R5bGU9InN0b3AtY29sb3I6cmdiKDI1NSwyNTUsMjU1KSIvPjwvbGluZWFyR3JhZGllbnQ+PHJlY3QgeD0iNTM2LjY0MiIgeT0iNjI5LjMxMSIgd2lkdGg9IjEyNSIgaGVpZ2h0PSIxMjUiIHRyYW5zZm9ybT0ibWF0cml4KC0wLjUsMC44NjYsLTAuODY2LC0wLjUsMTQ5Ny44MzksNTE4Ljg0MykiIGZpbGw9InVybCgjX2xncmFkaWVudF85KSIvPjxwYXRoIGQ9IiBNIDEwODIuMjggNDgwIEwgMjE2LjI1IC0yMCBMIC05MCA1MTAuNDQxIEwgNzc2LjAyNSAxMDEwLjQ0IEwgMTA4Mi4yOCA0ODAgWiAgTSA3MzAuMjcyIDgzOS42ODcgTCA3MzAuMzMzIDgzOS41ODIgQyA4MzMuODAxIDY2MC4yMzggNzcyLjMzNyA0MzAuOTYxIDU5My4wMTMgMzI3LjQyOCBMIDM3Ni41MDYgMjAyLjQyOCBMIDI2OC4yNTMgMTM5LjkyOCBDIDIzMy43MzUgMTk5LjcxNCAyNTQuMjIgMjc2LjE2MyAzMTQuMDA2IDMxMC42ODEgQyAyNzkuNDg5IDM3MC40NjggMjk5Ljk3MyA0NDYuOTE2IDM1OS43NiA0ODEuNDM0IEMgMzI1LjI0MiA1NDEuMjIxIDM0NS43MjYgNjE3LjY3IDQwNS41MTMgNjUyLjE4NyBMIDczMC4yNzIgODM5LjY4NyBaICIgZmlsbC1ydWxlPSJldmVub2RkIiBmaWxsPSJyZ2IoOTAsMTk2LDEyNikiLz48cmFkaWFsR3JhZGllbnQgaWQ9Il9yZ3JhZGllbnRfMSIgZng9IjAiIGZ5PSIwLjYzMzk3NDIyMDA3MjI2ODEiIGN4PSIwIiBjeT0iMC42MzM5NzQyMjAwNzIyNjgxIiByPSIxIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDM2Mi4zLDE3Mi44MTMsMCw1MTIuMjU5LDQwNS41MTMsMzI3LjQyOCkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjY2LjI5ODMlIiBzdG9wLW9wYWNpdHk9IjAiIHN0eWxlPSJzdG9wLWNvbG9yOnJnYigyNDQsMjIzLDM0KSIvPjxzdG9wIG9mZnNldD0iOTcuODI2MDg2OTU2NTIxNzMlIiBzdG9wLW9wYWNpdHk9IjAuNjYiIHN0eWxlPSJzdG9wLWNvbG9yOnJnYigyMzYsMjE0LDE5KSIvPjwvcmFkaWFsR3JhZGllbnQ+PHBhdGggZD0iIE0gNzMwLjMzMyA4MzkuNTgyIEwgNzMwLjI3MiA4MzkuNjg3IEwgNDA1LjUxMyA2NTIuMTg3IEwgNTkzLjAxMyAzMjcuNDI4IEMgNzcyLjMzNyA0MzAuOTYxIDgzMy44MDEgNjYwLjIzOCA3MzAuMzMzIDgzOS41ODIgWiAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZmlsbD0idXJsKCNfcmdyYWRpZW50XzEpIi8+PC9nPjwvZz48L2c+PC9zdmc+'));
